<div class="news">
  {% if site.news != blank %}
    {% assign news_size = site.news | size %}
    <div
      class="news-list"
      {% if include.limit and page.announcements.scrollable and news_size > 3 %}
        style="max-height: 400px; overflow-y: auto;"
      {% endif %}
    >
      {% assign news = site.news | reverse %}
      {% if include.limit and page.announcements.limit %}
        {% assign news_limit = page.announcements.limit %}
      {% else %}
        {% assign news_limit = news_size %}
      {% endif %}
      
      <ul class="news-items">
        {% for item in news limit: news_limit %}
          <li class="news-item">
            <span class="news-date">{{ item.date | date: '%b %d, %Y' }}</span>
            <span class="news-content">
              {% if item.inline %}
                {{ item.content | remove: '<p>' | remove: '</p>' | emojify }}
              {% else %}
                <a class="news-title" href="{{ item.url | relative_url }}">{{ item.title }}</a>
              {% endif %}
            </span>
          </li>
        {% endfor %}
      </ul>
      
      {% if include.limit and page.announcements.scrollable and news_size > 3 %}
        <div class="news-more">
          <a href="{{ '/news/' | relative_url }}">View all announcements â†’</a>
        </div>
      {% endif %}
    </div>
  {% else %}
    <p class="no-news">No news so far...</p>
  {% endif %}
</div>
