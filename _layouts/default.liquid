{%- comment -%}
================================================================================
DEFAULT LAYOUT â€” Standard Page Wrapper
================================================================================
The primary layout for most pages. Uses modular components for header/footer.
================================================================================
{%- endcomment -%}
<!doctype html>
<html lang="{{ site.lang | default: 'en' }}">
  <!-- Head -->
  <head>
    {%- comment -%} Handle redirects if specified {%- endcomment -%}
    {%- if page.redirect -%}
      {%- if page.redirect == true -%}
        {%- assign redirect = site.baseurl | append: '/' -%}
      {%- elsif page.redirect contains '://' -%}
        {%- assign redirect = page.redirect -%}
      {%- else -%}
        {%- assign redirect = page.redirect | relative_url -%}
      {%- endif -%}
      <meta http-equiv="refresh" content="3; url={{ redirect }}">
    {%- endif -%}

    {%- comment -%} Use modular head component {%- endcomment -%}
    {% include core/head.liquid %}
    
    <title>
      {%- if page.title -%}
        {{ page.title }} | {{ site.title }}
      {%- else -%}
        {{ site.title }}
      {%- endif -%}
    </title>
  </head>

  <!-- Body -->
  <body class="{% if site.navbar_fixed %}fixed-top-nav{% endif %}{% unless site.footer_fixed %} sticky-bottom-footer{% endunless %}">
    
    {%- comment -%} Skip link for accessibility {%- endcomment -%}
    <a href="#main-content" class="visually-hidden-focusable">Skip to main content</a>

    <!-- Header / Navigation -->
    {% include components/navbar.liquid %}

    <!-- Content -->
    <main id="main-content" class="container mt-5" role="main">
      {%- if page.toc and page.toc.sidebar -%}
        {%- if page.toc.sidebar == 'right' -%}
          <div class="row">
            <!-- main content area -->
            <div class="col-sm-9">{{ content }}</div>
            <!-- sidebar, which will move to the top on a small screen -->
            <div class="col-sm-3">
              <nav id="toc-sidebar" class="sticky-top" aria-label="Table of contents"></nav>
            </div>
          </div>
        {%- else -%}
          <div class="row">
            <!-- sidebar, which will move to the top on a small screen -->
            <div class="col-sm-3">
              <nav id="toc-sidebar" class="sticky-top" aria-label="Table of contents"></nav>
            </div>
            <!-- main content area -->
            <div class="col-sm-9">{{ content }}</div>
          </div>
        {%- endif -%}
      {%- else -%}
        {{ content }}
      {%- endif -%}
    </main>

    <!-- Footer -->
    {% include components/footer.liquid %}

    <!-- Scripts -->
    {% include core/scripts.liquid %}
  </body>
</html>
